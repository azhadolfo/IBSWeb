@model IBS.Models.MMSI.MMSIBilling

@{
    ViewData["Title"] = "Preview";
    
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<html class="bg-light">
<body class="bg-light">
    <div class="card text-dark bg-white  m-4">
        <div class="h1 fw-lighter p-3 align-middle text-center card-header bg-dark bg-gradient text-white">
            <i class="bi bi-pencil-square"></i> PREVIEW
        </div>
        <div class="card-body table-responsive">
            <div class="p-3">
                <div class="row justify-content-end">

                    <div class="row mb-2 justify-content-end">
                        <div class="col-12 d-flex justify-content-end">
                            <h1 class="text-end">BILLING DETAILS</h1>
                        </div>
                    </div>

                </div>

                <div class="row">

                    <div class="row">
                        <div class="col-12 text-start small-text">
                            <span><b>Date:</b> @Model.Date</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 text-start small-text">
                            <span><b>Billing#:</b> @Model.MMSIBillingNumber</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mb-2 text-start small-text">
                            <span><b>Status:</b> @Model.Status</span>
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Voyage#:</b> @Model.VoyageNumber
                    </div>
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Terminal:</b> @Model.Terminal?.TerminalName
                    </div>
                </div>

                <div class="row">
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Vessel:</b><br /> @Model.Vessel?.VesselName
                    </div>
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Port:</b><br /> @Model.Port?.PortName
                    </div>
                </div>

                <div class="row mt-3 mb-2 justify-content-end">
                    <div class="col-12 d-flex justify-content-end">
                        <h3 class="text-end">CUSTOMER DETAILS</h3>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Name:</b> @Model.Customer?.CustomerName
                    </div>
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Address:</b> @Model.Customer?.CustomerAddress
                    </div>
                </div>

                <div class="row">
                    <div class="col-6 text-center border p-2 small-text">
                        <b>TIN:</b> @Model.Customer?.CustomerTIN
                    </div>
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Business Style:</b> @Model.Customer?.CustomerBusinessStyle
                    </div>
                </div>

                <div class="row">
                    <div class="col-6 text-center border p-2 small-text">
                        <b>Terms:</b> @Model.Customer?.CustomerTerms
                    </div>
                </div>

                <div class="row mt-3 mb-2 justify-content-end">
                    <div class="col-12 d-flex justify-content-end">
                        <h3 class="text-end">DISPATCH TICKETS PAID</h3>
                    </div>
                </div>

                <table id="dataTable" class="table table-striped table-bordered mt-1" style="width:100%">
                    <thead>
                        <tr>
                            <th class="text-start align-middle ps-4">TUGBOAT</th>
                            <th class="text-start align-middle ps-4">SERVICE</th>
                            <th class="text-start align-middle ps-4">TIME START</th>
                            <th class="text-start align-middle ps-4">TIME END</th>
                            <th class="text-start align-middle ps-4">HOUR</th>
                            <th class="text-start align-middle ps-4">RATE</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var billing in Model.PaidDispatchTickets)
                        {
                            <tr>
                                <td class="text-start align-middle ps-4"><pre>@billing.Tugboat?.TugboatName</pre></td>
                                <td class="text-start align-middle ps-4"><pre>@billing.ActivityService?.ActivityServiceName</pre></td>
                                <td class="text-start align-middle ps-4"><pre>@billing.DateLeft - @billing.TimeLeft</pre></td>
                                <td class="text-start align-middle ps-4"><pre>@billing.DateArrived - @billing.TimeArrived</pre></td>
                                <td class="text-start align-middle ps-4"><pre>@billing.TotalHours</pre></td>
                                <td class="text-start align-middle ps-4"><pre>@billing.DispatchRate</pre></td>
                            </tr>
                        }
                    </tbody>
                </table>

            </div>
            <div class="row text-end justify-content-end mt-3">
                <div class="col-6 justify-content-center d-flex">
                    <a class="btn btn-primary custom2-btn col-12" asp-controller="Billing" asp-action="Index">
                        <i class="bi bi-arrow-90deg-left"></i> Go Back
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

@section Scripts{
    <script>
        $(document).ready(function () {

            table = $('#dataTable').DataTable();

            table.destroy();

            table = $('#dataTable').DataTable({
                paging: false,
                info: false,
                order: [[0, 'asc']],
                lengthChange: false,
                searching: false
            });

        });
    </script>
}